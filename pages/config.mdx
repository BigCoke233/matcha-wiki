# 主题设置

这一章将会简要介绍 Matcha 主题最新版本所有的设置项。

## 文章摘要显示模式

**文章摘要显示模式**，即文章在主页（搜索、聚合页面），也就是文章列表内，将如何显示前一小部分内容（称为摘要）。
大部分主题的做法是直接截断前几百字，Matcha 提供了三个选择。

### 根据 more 标签截断

其中的 more 标签指 `<!--more-->`，如果开启这个选项，主题会自动截取 `<!--more-->` 之前的所有内容作为摘要展示在文章列表内。
用这种方法可以在文章列表内正常显示截断部分的 a 标签、图片等可有特殊样式或是可互动的内容。如下：

![](/post-demo.png)

在 [1.2.0-alpha.bf285ac](https://github.com/BigCoke233/matcha/commit/bf285ac1dee6be5f9c7961549dd904c2f9066094) 开发版中，
Matcha 加入了自创的 `<!--less-->` 标签，它需要和 `<!--more-->` 标签一起使用，像这样：

```html
我不会被显示在摘要中。
<!--less-->
我将会被显示在摘要中。
<!--more-->
我不会被显示在摘要中。
```

简单来说，`<!--more-->` 标签之前的内容会被显示在摘要，而 `<!--less-->` 标签之后的内容会被显示在摘要，两者一起使用则可以截断文中的一段内容作为摘要，而不只是开头的一段。

### 截断前 200 字符

顾名思义，直接阶段前 200 个字符，无视任何样式和图片，只显示文字

### 不输出摘要

即留空。

## 基本信息

### 浏览器图标（Favicon）

即显示在标签页标题前的小图标，默认是根目录下的 `favicon.ico` 文件，你可以在这里输入一个图片 url，展示大部分格式的图片作为浏览器图标。

![](/favicon.png)

### 网站备案号

故名意思，留空则不显示。

### 网站建立日期

填入形如 `Y-m-d` 的日期，如 `2022-8-28` 表示「2022 年 8 月 28 日」。
这个设置用于定义你建立网站的时间，主题会截取其中的年份显示在也页脚的版权信息里。
如果你填的是 `2019-2-24`，那么页脚就会显示 `2019-2022`；如果年份与当前年份相同就只会显示 `2022`。

以后这个设置会有其他作用，目前只用于调用年份，但你仍需要按照格式完全填写，当然，也可以留空。

## 静态文件加速 CDN

如果你没有自己的 CDN，尤其是服务器在国外时，访问速度可能会比较慢，这个时候可以选择一个 CDN 加速主题使用的部分静态文件，
但只有开源的项目才会被加速，不过效果还比较可观，目前支持的 CDN 有：

- 字节跳动资源库（国内，速度快）
- CDNjs（国外，速度一般）

默认情况下，主题加载的是本地资源。

## 「夜间模式」应用方式

> 这个功能未正式发布，你可以在 1.1.0-beta.1 级以上的版本使用

这个设置用于定义你想要「夜间模式」功能（亦称深色模式，或开灯/关灯）如何应用于你的博客，有四种选项：

- 默认日间模式，手动+自动切换
- 默认夜间模式，手动+自动切换
- 总是日间模式，不可切换
- 总是夜间模式，不可切换

选择前两个选项，即**「 默认 xx 模式，手动+自动切换」**，则会默认展示对应的模式，并在晚上自动展示夜间模式，当然也可以由访客自由切换；
选择后两个选项，即**「总是 xx 模式，不可切换」**，则会禁用另一个模式，一只展示日间/夜间模式，不能被访客切换。

## 附加/实验性功能开关

有一部分功能考虑到自定义性和不稳定性，设立了自己的开关，可以被自主开启或关闭。

### 是否启用 Ajax 评论无刷新功能

这是一个实验性功能，默认开启。开启后，用户在前台发送评论时将会通过 Ajax 异步方式发出，
即在发信期间你可以做其他事情，不会占用你的时间，最重要的是，这样不会再评论之后刷新页面，极大地提高了页面的流畅度。

但是这个功能并不一定稳定，如果你遇到任何问题，请向作者反馈。

### 是否启用文章浏览量统计

这是一个附加功能，默认开启。开启后，主题将会统计一篇文章的点击量并记入数据库，然后再文章页面和文章列表展示出来。

多次刷新一篇文章并不会增加额外的浏览量，因为访问过的文章会被记录在用户的 cookie 内，要等 cookie 失效后，重新访问文章才会增加浏览量。
同时，这个功能也做了兼容性的处理，主题记录浏览量的字段名是 `views`，而部分插件和主题用的是 `viewsNum`，主题在数据浏览量的时候，会把这两个字段的数量加起来。

### 是否启用友情链接随机排序

这是一个附加功能，默认开启。开启后，友情链接页面的所有友情链接在每一次访问都会被打乱顺序展示，避免排名，平等对待每一个友情链接。

### 是否启用不蒜子统计功能

这是一个附加功能，默认开启。开启用，将会使用不蒜子统计网站的总访问量和访客量，并显示在页脚。
不蒜子是一个即装即用的网页 js 计数脚本，不需要你额外进行设置。

## 首页相关链接

首页相关链接是 `1.2.0-beta.2` 加入的新功能，大致效果如下。

![](/related_links.png)

若要使用此功能，则需要按照以下格式（JSON）填写在设置中：

```json
{
    "type": "post",
    "cid": 1,
    "des": "..."
},
{
    "type": "link",
    "link": "https://...",
    "title": "...",
    "des": "..."
}
```

每一个链接都写在一个 `{}` 里，其中 `type` 属性的值可以取 `post` 或 `link`。若是 `post`，即展示站内文章，则需要指定 `cid` 来展示对应的文章，此时 `des` 属性可选，不写则默认取文章前 30 字；
若是 `link`，则需要指定 `link`（外部链接）、`title`（标题）和 `des`（描述）。

注意，每个 `{}` 都需要用半角逗号隔开，最后一个则不用。

另一个设置项「首页相关链接标题」是可选的，留空不展示，若填写则会在「相关链接」之前显示一个标题，同时在文章列表之前站是一个「最新文章」标题。

## 自定义

### 自定义导航栏

自定义导航栏用 JSON 书写，具体格式如下：

```json
{
    "type":"addition/replace",
    "content": [
        { "link": "url", "text": "文本" }, 
        { "link": "url", "text": "文本" }, 
        { "link": "url", "text": "文本" }
    ]
}
```

其中，`type` 可以选择 `addition` 和 `replace` 两个值：若填入 `addition`，则会在原有导航栏的基础上，在后面添加自定义的导航按；若填入 `replace`，则会用自定义导航栏代替原有导航栏。
`content` 则以数组的形式填入自定义导航栏的链接与文本。

### 其他

其他设置项不做赘述。